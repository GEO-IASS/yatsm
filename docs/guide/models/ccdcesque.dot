digraph CCDCesque {
    graph [label="CCDCesque"]

    preprocess [label="Preprocess Data"]
    while [label="while (has observations)"]
    trained [label="Segment initialized?"]
    train [label="Clean and train on historic period"]
    end [label="End here++"]

    train_stable [label="Training period stable. Initialized"]
    train_unstable [label="Training period unstable. Remove observation and try again"]

    monitor [label="Monitor observations for change"]
    monitor_change [label="End segment record attributes"]
    monitor_noise [label="Delete <here>th observation"]
    monitor_stable [label="No change detected"]

    preprocess -> while

    while -> trained [label="Can monitor"]
    trained -> train [label="No"]

    train -> train_stable [label="Fit model and test"]
    train -> train_unstable [label="Fit model and test"]
    train_stable -> end [label="Segment initialized here++"]
    train_unstable -> end [label="start++ here++"]

    trained -> monitor [label="Yes"]
    monitor -> monitor_change [label="Change detected"]
    monitor_change -> end [label="start = here + consec here = start + min_obs"]
    monitor -> monitor_noise [label="Noise detected"]
    monitor_noise -> end [label="here++"]
    monitor -> monitor_stable [label="No change"]
    monitor_stable -> end [label="here++"]

    end -> while

    while -> end
}
